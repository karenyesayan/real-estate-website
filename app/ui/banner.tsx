import { XMarkIcon } from "@heroicons/react/20/solid";
import { MouseEvent, useEffect, useState } from "react";
import Link from "next/link";
import Cookies from "js-cookie";

const BANNER_HIDDEN_COOKIE_KEY = "cookie_hidden_is_true";

export default function Banner() {
  const [displayBanner, setDisplayBanner] = useState(true);

  useEffect(() => {
    const isHidden = Cookies.get(BANNER_HIDDEN_COOKIE_KEY) === "true";
    setDisplayBanner(isHidden);
  }, []);

  const onClick = (e: MouseEvent<HTMLButtonElement>) => {
    e.preventDefault();

    if (!displayBanner) {
      Cookies.set(BANNER_HIDDEN_COOKIE_KEY, "true");
      setDisplayBanner(true);
    }
  };

  if (displayBanner) {
    return null;
  }

  return (
    <div className="relative flex items-center gap-x-6 overflow-hidden bg-graphite-black outline-1 outline outline-signal-black pt-10 pb-5 lg:py-3.5 desktop:py-[18px] sm:px-3.5 sm:before:flex-1">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="1920"
        height="63"
        fill="none"
        viewBox="0 0 1920 63"
        className="absolute max-md:w-[1566px] max-md:h-[1046px] max-md:left-[calc(50%_-_1566px/2)] max-md:top-[calc(50%_-_1046px/2_-_0.5px)]"
      >
        <g
          style={{ mixBlendMode: "color-dodge" }}
          stroke="#666"
          strokeMiterlimit="10"
          clipPath="url(#clip0_89_3785)"
        >
          <path d="M.844 256.582c62.047-44.618 130.513-72.616 206.116-45.436 67.315 24.213 119.643 80.465 171.383 127.333 58.313 52.825 131.971 146.612 221.486 128.177 50.384-10.381 94.707-48.939 132.355-81.769 83.096-72.488 155.935-156.457 230.642-237.229 69.924-75.633 147.424-130.043 212.634-24.776 43.92 70.851 78.01 182.92 177.6 186.857 88.39 3.503 154.81-67.067 234.48-93.096 122.2-39.913 246.17 77.397 331.51 146.305"></path>
          <path d="M.844 231.984c63.684-49.603 134.631-82.536 215.067-53.95 67.878 24.112 124.094 79.085 174.273 128.509 52.175 51.419 122.202 152.417 207.625 135.183 47.801-9.639 89.847-48.274 125.091-79.621 80.589-71.721 152.559-153.491 225.374-232.831C1014.95 56.633 1093.26-9.591 1159.4 95.191c43.28 68.55 76.14 177.959 173.87 179.315 87.62 1.201 160.69-62.389 242.51-84.173 127.34-33.93 251.79 77.294 343.25 148.351"></path>
          <path d="M.844 204.574c70.257-55.254 145.22-84.965 231.103-46.612 71.024 31.731 133.224 91.767 188.187 144.925 49.31 47.712 110.41 128.228 188.161 103.145 47.443-15.316 88.697-56.226 124.093-89.108 70.948-65.891 136.882-137.254 203.814-207.159 63.786-66.658 141.178-131.501 209.748-38.558 48.77 66.121 79.82 171.874 177.19 176.707 86.73 4.295 170.59-52.902 254.2-68.244 126.44-23.216 244.04 63.923 341.71 131.067"></path>
          <path d="M.844 174.122c75.551-57.632 152.534-82.971 240.796-37.458 67.623 34.85 130.028 90.974 185.655 142.188 51.842 47.738 115.5 129.993 193.839 93.583 40.896-18.998 74.553-55.178 106.676-85.784 67.572-64.434 131.486-132.754 197.471-198.773C993.543 19.584 1070.88-33.37 1141.7 57.425c48.75 62.517 83.87 160.931 176.3 165.022 85.04 3.785 169.51-36.947 252.51-50.498 128.11-20.916 241.84 44.387 348.54 107.312"></path>
          <path d="M.844 141.189c87.137-62.848 170.258-77.065 263.047-18.588 66.676 42.009 128.314 98.926 187.982 150.243 49.822 42.853 105.858 110.125 175.578 71.158 37.341-20.864 68.415-58.067 98.16-88.162C788.937 191.739 850.6 126.078 915.767 63.818 983.287-.692 1060.58-47.254 1132.45 34.26c53.65 60.854 90.81 157.914 183.02 166.709 81.25 7.748 169.79-24.009 249.72-36.384 127.72-19.765 240.1 25.364 353.81 80.465"></path>
          <path d="M.844 106.39c94.4-63.488 181.205-70.29 275.81-3.861C348.036 152.644 412.18 215.978 480.058 270.9c46.676 37.74 98.313 89.491 156.651 46.127 38.569-28.663 70.053-71.849 102.073-107.032 54.144-59.448 109.644-118.103 169.21-172.156 72.993-66.249 152.148-97.545 225.658-17.693 53.81 58.45 95.04 149.68 183.45 159.575 83.69 9.359 174.17-12.605 257.06-23.983 121.9-16.722 230.39 10.509 344.87 52.876"></path>
          <path d="M.844 70.261C108.467 2.989 199.952 10.149 298.751 89.003c74.963 59.831 138.851 129.455 216.985 185.912 53.607 38.711 92.252 60.572 141.178 6.622 83.147-91.69 150.488-196.19 247.906-275.25C976.33-51.727 1055-73.36 1126.26-5.832c60.2 57.045 100.71 144.619 187.62 165.176 80.23 18.947 180.92.256 261.59-10.739 119.05-16.236 226.5-6.699 343.58 22.143"></path>
          <path d="M.844 33.416c120.513-70.289 218.648-47.456 320.26 42.521 72.789 64.459 133.327 139.095 215.937 192.048 60.64 38.891 92.558 45.769 134.042-16.159 65.73-98.108 131.895-198.39 227.65-270.75 77.418-58.527 155.857-71.67 231.517-4.193 62.99 56.2 107.82 146.612 196.9 166.505 79.01 17.643 171.21 9.256 250.85-1.585 115.63-15.751 224.25-22.859 341.05-9.844"></path>
          <path d="M.844-3.556c131.357-72.488 234.121-36.769 338.24 62.413 73.684 70.187 134.426 155.92 225.144 205.677 67.341 36.947 90.973 17.745 123.096-45.59 51.1-100.716 115.73-202.506 210.386-268.115 80.129-55.562 161.18-57.275 236.45 6.57 65.65 55.715 113.48 143.775 201.43 168.474 188.65 52.979 393.95-26.208 583.46-32.779"></path>
          <path d="M.844-40.094c65.346-34.8 126.779-55.46 199.901-30.12 60.486 20.966 110.027 64.97 154.401 109.792 73.198 73.997 135.781 173.562 233.302 217.541 73.147 32.984 90.462-11.455 115.142-73.46C743.821 82.509 804.563-21.122 899.475-80.34 1106.33-209.437 1180.99 51.775 1345.57 108.41c192.2 66.147 385.53-17.31 573.48-53.695"></path>
          <path d="M.844-75.61c68.16-36.052 130.974-56.149 205.425-28.765 62.456 22.961 112.943 69.88 158.186 117.413 71.152 74.738 144.734 204.117 250.873 233.879 74.298 20.838 86.011-48.658 104.835-104.603 32.942-97.929 89.72-205.906 184.709-257.709C1102.06-222.938 1201.37 18.867 1350.25 87.213c195.32 89.67 384.45-2.275 568.78-69.726"></path>
          <path d="M.844-109.489c68.825-37.432 130.82-57.76 206.576-31.245 62.814 21.99 114.145 71.056 158.8 118.87 72.456 77.602 150.13 225.007 262.791 246.996 76.574 14.958 87.316-61.519 104.042-118.947 28.722-98.517 80.436-207.568 179.696-253.388C1110.22-238.356 1216.72-6.216 1362.37 68.855c75.83 39.069 174.02 59.089 258.5 45.487 107.08-17.234 205.01-80.67 298.18-132.14"></path>
          <path d="M.844-141.194c73.3-42.368 144.145-66.786 225.297-30.171 60.896 27.486 109.209 78.01 152.867 127.052C444.431 29.172 526.887 183.992 636.94 195.6c82.84 8.745 93.3-81.693 111.05-142.751 27.443-94.375 76.855-195.551 176.319-231.962C1120.3-250.884 1233.62-35.671 1375.03 48.425c71.46 42.496 164.86 71.593 248.44 61.187C1735.45 95.651 1832.35 14.649 1919-50.68"></path>
          <path d="M.844-170.112c69.208-44.081 137.342-74.764 219.108-41.754 65.525 26.463 117.7 82.638 162.713 135.131C447.014-1.69 527.936 152.388 642.259 155.1c81.51 1.917 96.6-89.824 115.833-151.087 29.745-94.656 76.779-186.474 181.102-213.245C1138.97-260.524 1249.89-63.746 1392.83 30.655c69.98 46.228 163.3 84.352 248.55 72.053C1752.86 86.6 1842.43-6.037 1919.03-80.34"></path>
          <path d="M.844-195.656c63.53-46.049 129.516-84.633 210.31-57.581 62.968 21.069 112.559 72.667 154.938 121.606 69.413 80.133 139.235 222.68 258.725 231.782 90.845 6.904 114.451-81.36 140.59-151.189 35.652-95.27 85.346-175.94 194.529-190.693 193.554-26.157 305.094 140.22 439.574 244.95 67.42 52.493 158.7 102.762 246.91 94.17 117.01-11.403 203.12-120.173 272.61-203.554"></path>
          <path d="M.844-215.804c63.224-44.106 128.416-80.414 207.599-54.641 61.663 20.072 110.743 69.394 152.611 116.85 67.443 76.4 138.825 223.063 254.888 227.078 89.745 3.094 120.462-76.375 152.636-146.229 41.254-89.517 97.086-171.465 202.97-185.758C1158.33-283.715 1275-128.282 1407.56-28.87c65.04 48.76 156.78 98.364 240.31 96.728 116.78-2.302 203.28-113.347 271.16-194.401"></path>
          <path d="M.844-229.586c62.226-42.572 126.472-77.883 204.095-54.41 59.975 18.128 108.339 64.306 149.542 109.511C420.85-101.639 491.925 43.49 604.228 44.181c88.058.537 125.552-69.522 163.992-137.766 46.957-83.354 108.595-163.334 210.719-177.346 180.031-24.674 301.641 114.728 434.281 207.518 64.4 45.052 155.14 95.32 234.83 102.429 116.19 10.355 204.1-101.79 270.95-179.929"></path>
          <path d="M.844-238.126c59.694-40.782 123.506-76.042 198.059-57.121 63.556 16.109 114.043 64.153 157.317 110.663 65.781 70.698 131.741 202.02 241.64 197.136 83.147-3.682 125.526-66.786 168.954-128.893 53.325-76.298 117.699-147.839 215.348-161.698 177.318-25.185 301.538 95.321 439.498 181.284 63.73 39.734 144.6 86.857 218.03 105.855 119.03 30.785 209.67-80.721 279.34-159.473"></path>
          <path d="M.844-242.524c58.057-40.168 120.513-76.195 193.839-61.288 61.05 12.426 110.667 55.177 153.199 98.108 66.702 67.297 128.8 188.161 235.272 183.431 80.768-3.58 129.337-56.712 178.749-113.961 59.208-68.575 127.546-133.725 221.435-147.379 169.822-24.699 299.952 71.644 439.522 148.3 69.26 38.046 142.1 84.556 214.81 115.341C1754.73 29.606 1846.75-77.68 1919-155.947"></path>
        </g>
        <defs>
          <clipPath id="clip0_89_3785">
            <path
              fill="#fff"
              d="M0 0H1920V1282H0z"
              transform="translate(0 -610)"
            ></path>
          </clipPath>
        </defs>
      </svg>
      <div
        className="absolute left-[max(-7rem,calc(50%-52rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl"
        aria-hidden="true"
      >
        <div
          className="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#ff80b5] to-[#9089fc] opacity-30"
          style={{
            clipPath:
              "polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)",
          }}
        />
      </div>
      <div
        className="absolute left-[max(45rem,calc(50%+8rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl"
        aria-hidden="true"
      >
        <div
          className="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#ff80b5] to-[#9089fc] opacity-30"
          style={{
            clipPath:
              "polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)",
          }}
        />
      </div>
      <div className="z-0 min-[376px]:max-lg:ml-4 text-center flex flex-wrap items-center gap-x-1.5 desktop:gap-x-2.5 gap-y-2">
        <p className="not-italic text-xs lg:text-sm desktop:text-lg font-medium leading-[150%] lg:leading-[150%] desktop:leading-[150%]">
          ✨Discover Your Dream Property with Estatein
        </p>
        <Link
          href="/about"
          className="not-italic text-xs lg:text-sm desktop:text-lg font-medium leading-[150%] lg:leading-[150%] desktop:leading-[150%] underline hover:no-underline flex-none rounded-full hover:text-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900"
        >
          Learn More
        </Link>
      </div>
      <div className="flex flex-1 justify-end">
        <button
          type="button"
          onClick={onClick}
          className="absolute right-4 bottom-4 laptop:right-8 laptop:bottom-[11px] desktop:bottom-[15px] p-1 focus-visible:outline-offset-[-4px] bg-[rgba(255,255,255,0.10)] rounded-[75px] hover:bg-[rgba(153,153,153,0.10)]"
        >
          <span className="sr-only">Dismiss</span>
          <XMarkIcon
            className="h-[18px] w-[18px] desktop:h-6 desktop:w-6"
            aria-hidden="true"
          />
        </button>
      </div>
    </div>
  );
}
